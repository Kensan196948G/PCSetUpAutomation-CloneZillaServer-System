---
description: MCP統合でデプロイ前の総合チェックを実行
---

**全MCP統合**でデプロイ前の包括的なチェックを実行します。

## 実行内容

### 使用するMCPサーバ

1. **Serena** → コード品質チェック
2. **Puppeteer** → E2Eテスト実行
3. **Filesystem** → ファイル・設定確認
4. **Sequential Thinking** → デプロイリスク分析
5. **Memory** → 過去のデプロイ問題確認

## チェック項目

### 1. コード品質（Serena）
- [ ] コーディング規約違反なし
- [ ] デッドコード削除済み
- [ ] TODOコメント解消済み
- [ ] 非推奨API使用なし

### 2. テスト（Puppeteer + Chrome）
- [ ] 全ユニットテスト合格
- [ ] 全統合テスト合格
- [ ] 全E2Eテスト合格
- [ ] カバレッジ80%以上

### 3. 設定ファイル（Filesystem）
- [ ] 本番用設定ファイル存在
- [ ] デバッグモード無効化
- [ ] シークレット情報除外確認
- [ ] 環境変数設定完了

### 4. パフォーマンス（Puppeteer）
- [ ] API応答時間200ms以内
- [ ] ページロード時間1秒以内
- [ ] メモリリークなし
- [ ] リソース使用量適正

### 5. セキュリティ（Sequential Thinking）
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] CSRF対策
- [ ] 認証・認可実装

### 6. データベース（Serena + Filesystem）
- [ ] マイグレーション準備完了
- [ ] バックアップ取得済み
- [ ] ロールバック手順確認

### 7. ドキュメント（Filesystem）
- [ ] README最新化
- [ ] API仕様書更新
- [ ] 運用マニュアル更新
- [ ] CHANGELOG更新

### 8. 依存関係（Context7）
- [ ] 依存ライブラリ最新版確認
- [ ] セキュリティアップデート適用
- [ ] 非推奨パッケージなし

## チェック実行フロー

### フェーズ1: 事前分析
1. **Memory**: 過去のデプロイ問題確認
2. **Sequential Thinking**: リスク分析

### フェーズ2: コード検証
3. **Serena**: コード品質スキャン
4. **Context7**: 依存関係確認

### フェーズ3: テスト実行
5. **Puppeteer**: 全E2Eテスト実行
6. パフォーマンステスト

### フェーズ4: 設定確認
7. **Filesystem**: 設定ファイル検証
8. 環境変数チェック

### フェーズ5: セキュリティ
9. **Sequential Thinking**: セキュリティ脆弱性分析
10. ペネトレーションテスト

### フェーズ6: 最終確認
11. **Filesystem**: ドキュメント最新化確認
12. **Memory**: チェック結果を記録

## 出力レポート

### ✅ 合格項目リスト
- 全チェック項目の合格/不合格
- 各項目の詳細スコア

### ❌ 不合格項目詳細
- 問題の内容
- 影響度（Critical/High/Medium/Low）
- 修正方法
- 修正優先度

### ⚠️ 警告事項
- デプロイ後の注意点
- 監視すべきメトリクス
- ロールバック手順

### 📊 メトリクス
- テストカバレッジ: XX%
- コード品質スコア: XX点
- パフォーマンススコア: XX点
- セキュリティスコア: XX点

## 使用例

### 完全デプロイチェック
```
/mcp-deploy-check
本番デプロイ前の全項目チェックを実行してください
```

### ステージング環境チェック
```
/mcp-deploy-check
ステージング環境デプロイ用の簡易チェックを実行してください
```

### セキュリティ重点チェック
```
/mcp-deploy-check
セキュリティ項目を重点的にチェックしてください
```

### パフォーマンス重点チェック
```
/mcp-deploy-check
パフォーマンス項目を重点的にチェックしてください
```

MCP統合でデプロイの安全性を最大限確保します。
