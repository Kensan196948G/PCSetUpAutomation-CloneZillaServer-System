# 制約事項

**プロジェクト名**: 会社キッティング自動化フレームワーク
**作成日**: 2025年11月17日
**バージョン**: 1.0

---

## 1. 概要

本ドキュメントは、会社キッティング自動化フレームワークプロジェクトにおける各種制約事項を定義します。制約事項を明確にすることで、現実的なシステム設計とスケジュール計画を立案します。

---

## 2. 技術的制約

### 2.1 既存インフラストラクチャへの依存

**制約内容**:
- 既存Active Directory環境を使用（新規構築不可）
- 既存ネットワークインフラを使用（新規配線不可）
- 既存DHCPサーバの設定変更が必要

**影響**:
- Active Directoryのバージョン・設定に依存
- ネットワークトポロジー変更ができない
- VLANセグメント追加には別途承認必要

**リスク**:
- AD環境の障害がシステム全体に影響
- ネットワーク帯域が不足する可能性

**対策**:
- AD管理者との密な連携
- ネットワーク負荷分散の検討
- VLAN分離の提案（承認取得）

---

### 2.2 オペレーティングシステム制約

**制約内容**:
- マスターPC: Windows 11 Enterprise限定
- DRBLサーバ: Ubuntu 22.04 LTS（会社標準）
- 他のOSへの対応不可（Windows 10、macOS等）

**影響**:
- Windows 11のライセンスが必須
- Ubuntu以外のLinuxディストリビューション使用不可

**リスク**:
- Windows 11のサポート終了後の対応が必要

**対策**:
- サポートライフサイクルの定期確認
- 将来のOS移行計画を策定

---

### 2.3 ネットワーク制約

**制約内容**:
- 社内LAN環境のみ（インターネット接続は限定的）
- PXEブート対応ネットワークセグメントが必要
- マルチキャスト対応スイッチが必須

**影響**:
- ChatGPT OCRは社内プロキシ経由
- Windows Updateはプロキシ経由またはWSUS使用
- マルチキャストに非対応のスイッチでは同時展開不可

**リスク**:
- プロキシ障害時にWindows Update失敗
- 古いスイッチでは同時展開台数が制限される

**対策**:
- プロキシ設定の冗長化
- ネットワーク機器のマルチキャスト対応確認
- 必要に応じてユニキャスト展開に切り替え

---

### 2.4 ハードウェア制約

**制約内容**:
- 既存サーバを流用（新規購入予算なし）
- DRBLサーバスペック: 最低4コアCPU、8GBメモリ、500GBストレージ
- テスト用PC台数: 5台まで

**影響**:
- サーバスペックによっては同時展開台数が制限される
- 大規模テスト（50台同時展開等）が実施困難

**リスク**:
- 本番環境で予想外のパフォーマンス問題が発生

**対策**:
- パフォーマンステストを十分に実施
- 段階的展開（10台→20台→フル展開）
- 必要に応じてサーバスペックアップを予算申請

---

### 2.5 技術スタック制約

**制約内容**:
- OSSベースの技術選定（ライセンスコスト削減）
- Python 3.10以降（Ubuntu 22.04標準）
- PostgreSQLまたはSQLite（商用DBは不可）

**影響**:
- 最新の言語機能が使用できない場合がある
- 商用サポートが受けられない

**リスク**:
- OSSコミュニティの開発停止リスク

**対策**:
- 活発に開発されているプロジェクトを選定
- 代替技術の検討（コンティンジェンシープラン）

---

## 3. 業務的制約

### 3.1 運用時間帯制約

**制約内容**:
- 本番展開作業: 平日9:00〜18:00のみ
- システムメンテナンス: 日曜早朝のみ（04:00〜08:00）
- 緊急対応: 平日18:00以降は要承認

**影響**:
- 大量展開（100台）は複数日に分散必須
- メンテナンス時間が限定される

**リスク**:
- 短納期のPC導入要求に対応困難

**対策**:
- 週次メンテナンスの効率化
- 展開スケジュールの早期調整

---

### 3.2 保守時間制約

**制約内容**:
- 月次メンテナンス時間: 最大2時間
- ダウンタイム許容時間: 月1時間以内
- 緊急メンテナンス: 年3回まで

**影響**:
- 大規模な設定変更が困難
- マスターイメージ更新に十分な時間が取れない可能性

**リスク**:
- メンテナンス時間超過による業務影響

**対策**:
- メンテナンス作業の事前リハーサル
- ロールバック手順の整備

---

### 3.3 人的リソース制約

**制約内容**:
- 運用担当者: 2名（兼務）
- 開発メンバー: 2名（専任）
- オンコール対応: 平日のみ

**影響**:
- 休暇・病欠時の対応が困難
- 夜間・休日の障害対応ができない

**リスク**:
- キーパーソン不在時の展開遅延

**対策**:
- ドキュメント整備による属人性排除
- オンコール体制の整備（将来）

---

## 4. 予算制約

### 4.1 初期投資制約

**制約内容**:
- 総予算: 300万円以内
- ハードウェア新規購入: 50万円以内
- ソフトウェアライセンス: 年間10万円以内

**影響**:
- 商用ソフトウェアの導入が困難
- 高性能サーバの購入が困難

**リスク**:
- 既存サーバのスペック不足

**対策**:
- OSSベースの技術選定
- クラウド利用の検討（コスト比較）

---

### 4.2 運用コスト制約

**制約内容**:
- 年間運用費: 50万円以内
- 外部サポート契約: 予算化されていない
- クラウドサービス: 月額5万円以内

**影響**:
- ChatGPT API利用回数が制限される
- ベンダーサポートが受けられない

**リスク**:
- 技術的問題の解決に時間がかかる

**対策**:
- ChatGPT OCRの使用を必要最小限に
- コミュニティサポートの活用
- 社内ナレッジベースの構築

---

## 5. スケジュール制約

### 5.1 プロジェクト期間制約

**制約内容**:
- プロジェクト期間: 6ヶ月（最長）
- 本番稼働開始: 2026年2月1日（必達）
- 遅延許容: 最大2週間

**影響**:
- 十分なテスト期間が確保できない可能性
- ドキュメント整備が不十分になるリスク

**リスク**:
- 品質低下によるシステム障害

**対策**:
- アジャイル開発による早期フィードバック
- MVP（Minimum Viable Product）優先
- リスクバッファの確保

---

### 5.2 マイルストーン制約

**制約内容**:
- 要件定義: 1ヶ月以内
- 開発: 2ヶ月以内
- テスト: 1ヶ月以内
- 各フェーズ延長不可

**影響**:
- 要件変更が困難
- スコープクリープのリスク

**リスク**:
- 品質を犠牲にした納期優先

**対策**:
- 要件の早期固定
- 変更管理プロセスの厳格化

---

## 6. 法的・コンプライアンス制約

### 6.1 ライセンス制約

**制約内容**:
- Windows 11: ボリュームライセンス契約内での使用
- Microsoft 365: 既存ライセンス範囲内
- GPLライセンス: コード公開義務あり（将来的に外部公開する場合）

**影響**:
- ライセンス数を超える展開不可
- GPL違反のリスク

**リスク**:
- ライセンス違反による法的問題

**対策**:
- ライセンス数の定期確認
- GPLライセンス条項の遵守

---

### 6.2 個人情報保護制約

**制約内容**:
- Serial番号の取り扱い: 個人情報に該当しない
- ログには個人情報を含めない
- ChatGPT OCRへの送信データは最小限

**影響**:
- ユーザー名、部署名等のログ記録不可
- Serial番号以外の情報は外部送信不可

**リスク**:
- 個人情報保護法違反

**対策**:
- ログフィルタリングの実装
- 外部送信データの最小化

---

### 6.3 セキュリティポリシー制約

**制約内容**:
- 社内セキュリティポリシー準拠必須
- 脆弱性スキャン: 四半期1回実施義務
- パッチ適用: 発見後1週間以内（高リスク）

**影響**:
- セキュリティ要件によるコスト増
- パッチ適用作業の頻度増加

**リスク**:
- セキュリティ監査不合格

**対策**:
- セキュリティ設計の早期レビュー
- 自動化可能な部分は自動化

---

## 7. 運用制約

### 7.1 サポート体制制約

**制約内容**:
- 運用サポート: 平日9:00〜18:00のみ
- 緊急対応: 別途オンコール体制（有料）
- 夜間・休日サポート: 原則対応不可

**影響**:
- 夜間・休日の障害対応が遅延
- 大規模展開は平日日中のみ

**リスク**:
- 緊急時の対応遅延による業務影響

**対策**:
- 詳細な運用手順書整備
- セルフリカバリー機能の実装
- 監視アラートの強化

---

### 7.2 トレーニング制約

**制約内容**:
- 運用トレーニング: 合計2日間のみ
- ハンズオン研修: 1日のみ
- 追加トレーニング: 予算化されていない

**影響**:
- 運用習熟に時間がかかる
- 複雑な障害対応が困難

**リスク**:
- 運用ミスによるシステム停止

**対策**:
- わかりやすい運用手順書作成
- 動画マニュアルの作成
- FAQ充実化

---

## 8. 性能制約

### 8.1 同時展開台数制約

**制約内容**:
- ネットワーク帯域: 1Gbps
- サーバスペック: 4コアCPU、8GBメモリ
- 同時展開台数: 最大20台（理論値）

**影響**:
- 同時展開時のパフォーマンス劣化
- 100台展開には5〜10回のバッチ展開が必要

**リスク**:
- 大量展開時の作業時間超過

**対策**:
- 段階的展開（10台ずつ）
- 夜間・早朝時間帯の活用

---

### 8.2 ストレージ制約

**制約内容**:
- マスターイメージ格納: 500GB
- データベースサイズ: 最大10GB
- ログファイル: 最大100GB

**影響**:
- マスターイメージのバージョン管理が限定的（最大10世代）
- 長期ログの保存が困難

**リスク**:
- ディスク容量枯渇

**対策**:
- 古いマスターイメージの定期削除
- ログローテーション徹底
- 必要に応じてストレージ拡張

---

## 9. スコープ制約

### 9.1 対象PCの制約

**制約内容**:
- 対象: デスクトップPCのみ
- ノートPC: 対象外
- タブレット・モバイル端末: 対象外

**影響**:
- ノートPC用の別ソリューションが必要
- 全社PC管理の統一化ができない

**リスク**:
- 二重運用によるコスト増

**対策**:
- ノートPC用ソリューションの将来検討

---

### 9.2 展開範囲の制約

**制約内容**:
- 初期フェーズ: 本社のみ
- 支店・拠点: 対象外（将来拡張）
- 年間展開台数: 100台程度

**影響**:
- 多拠点展開機能は実装されない
- 大規模展開（1000台以上）には対応困難

**リスク**:
- 将来の拠点拡大時に再設計必要

**対策**:
- 拡張性を考慮した設計
- 多拠点対応の技術検証（POC）

---

## 10. データ制約

### 10.1 データ保持期間制約

**制約内容**:
- セットアップログ: 1年間
- マスターイメージ: 最新3世代のみ
- ODJファイル: 展開完了後1年で削除

**影響**:
- 古いログの参照が不可
- 過去のマスターイメージへのロールバック制限

**リスク**:
- 監査時のエビデンス不足

**対策**:
- 長期保存が必要なデータはアーカイブ
- 重要ログは別途保存

---

### 10.2 データベースレコード数制約

**制約内容**:
- pc_masterテーブル: 最大10,000レコード
- setup_logsテーブル: 最大100,000レコード
- これ以上はパフォーマンス劣化の可能性

**影響**:
- 大規模環境への拡張が困難
- 古いレコードの定期削除が必要

**リスク**:
- データベースパフォーマンス低下

**対策**:
- 定期的なデータアーカイブ
- PostgreSQL移行の検討（スケーラビリティ向上）

---

## 11. セキュリティ制約

### 11.1 通信暗号化制約

**制約内容**:
- PXEブート通信: 暗号化不可（TFTP制約）
- マルチキャスト通信: 暗号化不可
- API通信: 社内LANのみ（外部アクセス不可）

**影響**:
- PXEブートトラフィックが平文
- ネットワーク盗聴のリスク

**リスク**:
- 社内LANでの情報漏洩

**対策**:
- 専用VLAN分離
- 物理的なネットワークアクセス制御

---

### 11.2 認証機能制約

**制約内容**:
- 二要素認証: 将来実装（初期は未実装）
- LDAP/AD認証連携: 将来実装
- 初期はユーザー名/パスワード認証のみ

**影響**:
- セキュリティレベルが限定的
- パスワード漏洩リスク

**リスク**:
- 不正アクセスによる情報漏洩

**対策**:
- 強固なパスワードポリシー
- IP制限の実装
- セッションタイムアウトの厳格化

---

## 12. 外部サービス依存制約

### 12.1 ChatGPT API制約

**制約内容**:
- ChatGPT API使用: OCR機能のみ
- 月間利用制限: APIコール1,000回まで
- レート制限: 1分間20リクエスト

**影響**:
- 大量PC導入時にOCR処理が遅延
- API利用制限超過のリスク

**リスク**:
- Serial番号抽出の遅延

**対策**:
- 手動入力のフォールバック機能
- ローカルOCR（Tesseract）の検討

---

### 12.2 Active Directory依存制約

**制約内容**:
- ODJファイル生成: AD管理者に依存
- ドメインコントローラー: 社内ADサーバのみ
- AD障害時はドメイン参加不可

**影響**:
- AD管理者の作業工数が発生
- AD障害時はセットアップ中断

**リスク**:
- ADダウン時の全展開停止

**対策**:
- ODJファイルの事前生成・ストック
- AD冗長化の提案（別プロジェクト）

---

## 13. 将来拡張制約

### 13.1 アーキテクチャ変更制約

**制約内容**:
- 4レイヤーアーキテクチャは変更不可
- コア機能の大幅な設計変更は次期バージョン
- 後方互換性の維持が必須

**影響**:
- 新機能追加時の設計制約
- レガシーコードの保持

**リスク**:
- 技術的負債の蓄積

**対策**:
- リファクタリング計画の策定
- 次期バージョンでの抜本的見直し

---

### 13.2 多拠点展開制約

**制約内容**:
- 初期フェーズは本社のみ
- 拠点間のネットワーク帯域: 未確認
- VPN経由のPXEブート: 未検証

**影響**:
- 拠点展開には別途設計が必要
- ネットワーク構成の大幅変更が必要な可能性

**リスク**:
- 拠点展開プロジェクト失敗

**対策**:
- 拡張性を考慮した設計
- POC（概念実証）の実施

---

## 14. その他制約

### 14.1 ドキュメント言語制約

**制約内容**:
- すべてのドキュメントは日本語
- 英語ドキュメント: 作成予定なし

**影響**:
- グローバル展開時に翻訳コストが発生

**対策**:
- 将来の翻訳を考慮した用語統一

---

### 14.2 テスト環境制約

**制約内容**:
- テスト用PC: 5台まで
- 同時展開テスト: 最大10台まで
- 本番と同等のテスト環境構築不可

**影響**:
- 20台同時展開のテストができない
- 本番環境での予期せぬ問題発生リスク

**対策**:
- 段階的展開（10台→20台）
- 本番環境での慎重な初期展開

---

## 15. リスク受容

以下の制約はリスクとして受容し、将来の改善項目とする：

| 制約ID | 制約内容 | リスクレベル | 対応時期 |
|--------|---------|------------|---------|
| C-01 | PXEブート暗号化不可 | 中 | v2.0（次期） |
| C-02 | 夜間・休日サポート不可 | 中 | 運用6ヶ月後 |
| C-03 | 二要素認証未実装 | 中 | v1.5 |
| C-04 | 多拠点展開未対応 | 低 | v2.0 |
| C-05 | テスト環境の本番同等性 | 中 | 予算次第 |

---

## 16. 制約事項の定期見直し

### 見直しタイミング
- プロジェクト開始時
- 各フェーズ終了時
- 重大な問題発生時
- 四半期ごと（運用開始後）

### 見直しプロセス
1. 制約事項の現状確認
2. 制約緩和の可能性検討
3. 予算・リソース追加の可否判断
4. 制約事項ドキュメント更新

---

## 17. 関連ドキュメント

- [プロジェクト憲章.md](../00_プロジェクト概要/プロジェクト憲章.md)
- [機能要件一覧.md](./機能要件一覧.md)
- [非機能要件一覧.md](./非機能要件一覧.md)
- [リスク管理表](../00_プロジェクト概要/プロジェクト計画書.md#リスク管理計画)

---

**文書管理情報**
- 作成者: プロジェクトマネージャー
- 承認者: IT運用マネージャー
- 最終更新日: 2025年11月17日
- バージョン: 1.0
- 次回レビュー予定: 設計フェーズ開始時
