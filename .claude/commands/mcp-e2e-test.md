---
description: MCP統合で完全E2Eテストを自動実行
---

**Chrome DevTools + Puppeteer + Serena**を統合して、完全自動E2Eテストを実行します。

## 実行内容

### 使用するMCPサーバ

1. **Serena** → テスト対象コード理解
2. **Puppeteer** → E2Eテスト自動化
3. **Chrome DevTools** → ブラウザ動作確認
4. **Memory** → テスト結果履歴記録

## テストシナリオ

### E2E-001: 管理GUI完全フロー
1. 管理GUI起動
2. ログイン
3. PC一覧表示
4. CSVインポート（テストデータ）
5. データ確認
6. PC詳細表示
7. ODJファイルアップロード
8. ログアウト

### E2E-002: API統合テスト
1. ブラウザから /api/pcinfo 呼び出し
2. レスポンス検証
3. /api/log でログ記録
4. 管理GUIでログ確認

### E2E-003: エラーハンドリング
1. 不正Serial番号 → 404確認
2. 必須パラメータなし → 400確認
3. エラーメッセージ表示確認

### E2E-004: パフォーマンス
1. 各ページのロード時間測定
2. API応答時間測定（目標: 200ms以内）
3. 同時リクエスト処理確認

## テスト実行フロー

### 準備フェーズ
1. **Serena**: テスト対象のエンドポイント一覧取得
2. **Context7**: テストフレームワーク最新情報確認

### 実行フェーズ
3. **Puppeteer**: E2Eテストシナリオ自動実行
4. **Chrome DevTools**: 各ステップのスクリーンショット取得

### 検証フェーズ
5. **Sequential Thinking**: 失敗原因分析（失敗時）
6. **Memory**: テスト結果を履歴として記録

## 出力レポート

### テスト結果サマリ
- 総テスト数: XX
- 成功: XX
- 失敗: XX
- 成功率: XX%

### パフォーマンス測定結果
- ページロード時間: 平均 XXms
- API応答時間: 平均 XXms
- 目標達成状況: ✅/❌

### スクリーンショット
- 各テストステップのスクリーンショット保存
- エラー発生時の画面キャプチャ

### 失敗詳細（該当時）
- 失敗したテストケース
- エラーメッセージ
- 原因分析
- 修正提案

## 使用例

### 完全E2Eテスト実行
```
/mcp-e2e-test
すべてのE2Eテストシナリオを実行し、結果レポートを作成してください
```

### 管理GUIのみテスト
```
/mcp-e2e-test
管理GUIのE2Eテストのみを実行してください
```

### パフォーマンス重点テスト
```
/mcp-e2e-test
パフォーマンス測定を重点的に実施し、目標達成状況を確認してください
```

### 回帰テスト
```
/mcp-e2e-test
前回のテスト結果と比較する回帰テストを実行してください
```

MCP統合で完全自動化されたE2Eテストを実現します。
