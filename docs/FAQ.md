# よくある質問 (FAQ)

## 目次

1. [一般的な質問](#一般的な質問)
2. [導入前の質問](#導入前の質問)
3. [技術的な質問](#技術的な質問)
4. [運用に関する質問](#運用に関する質問)
5. [トラブルシューティング](#トラブルシューティング)
6. [ライセンスとコスト](#ライセンスとコスト)

---

## 一般的な質問

### Q1: このシステムは何ができますか？

**A:** Windows PCのOSイメージを一括で展開する自動化システムです。主な機能：

- PXEブートによる完全自動展開
- 最大40台のPCに同時展開（マルチキャスト）
- イメージの作成と管理
- 部署別・用途別の複数イメージ管理
- 展開履歴の自動記録

---

### Q2: 「LANに挿して電源を入れるだけ」の仕組みは？

**A:** 以下の技術を組み合わせています：

1. **PXE Boot**: PCがネットワークからOSを起動
2. **DHCP**: 自動的にIPアドレスを割当
3. **TFTP**: Clonezillaイメージを配信
4. **Multicast**: 複数PCに同時にイメージを送信

ユーザーは、PCをネットワークに接続して電源を入れるだけで、自動的にOSがインストールされます。

---

### Q3: どのOSに対応していますか？

**A:** 主にWindows環境を想定していますが、以下にも対応可能：

- **Windows**: 10, 11, Server 2016/2019/2022
- **Linux**: Ubuntu, CentOS, Debian など
- **その他**: macOS (制限あり)

このドキュメントではWindows環境をメインに説明しています。

---

## 導入前の質問

### Q4: 最小限必要なハードウェアは？

**A:** 

**サーバー:**
- CPU: Intel Core i5以上
- RAM: 8GB以上
- ストレージ: 500GB以上（SSD推奨）
- NIC: Gigabit Ethernet

**ネットワーク:**
- Gigabitスイッチ
- CAT5e以上のLANケーブル

**ターゲットPC:**
- PXEブート対応NIC
- 最低64GB以上のストレージ

---

### Q5: 既存のネットワークに影響はありますか？

**A:** 適切に設定すれば影響はありません。以下の対策を推奨：

1. **VLAN分離**: キッティング専用VLANを作成
2. **物理分離**: 専用スイッチを使用
3. **DHCPスコープ**: 既存DHCPと競合しない範囲を設定

本番ネットワークとキッティングネットワークは必ず分離してください。

---

### Q6: 導入にかかる時間は？

**A:** 

- **初回セットアップ**: 2-3時間
  - サーバーインストール: 30分
  - DRBL/Clonezilla設定: 1時間
  - テスト: 1時間

- **マスターイメージ作成**: 2-3時間
  - OS/アプリインストール: 1.5時間
  - イメージ作成: 0.5-1時間

- **運用開始**: 即日可能

詳細は [QUICK_START.md](./QUICK_START.md) を参照。

---

### Q7: 予算はどのくらい必要ですか？

**A:** 

**ソフトウェア:** すべてオープンソース・無料

**ハードウェア（新規購入の場合）:**
- サーバー: 10-20万円
- ネットワークスイッチ: 2-10万円
- LANケーブル等: 1-2万円

**合計**: 約15-35万円

既存のサーバーやネットワーク機器を流用すれば、さらに低コスト。

---

## 技術的な質問

### Q8: Windows以外のOSもイメージ化できますか？

**A:** はい、可能です。Clonezillaは以下をサポート：

- Linux（全ディストリビューション）
- Windows（全バージョン）
- macOS（制限あり）
- BSD系OS

ただし、macOSは特別なライセンス要件があるため注意が必要です。

---

### Q9: UEFIとLegacy BIOSの両方に対応していますか？

**A:** はい、両方対応しています。

- **UEFI**: GPTパーティション対応
- **Legacy BIOS**: MBRパーティション対応

ただし、マスターPCとターゲットPCで同じブートモードを使用する必要があります。

---

### Q10: セキュアブート（Secure Boot）は対応していますか？

**A:** PXEブート時はセキュアブートを無効にする必要があります。

**ワークフロー:**
1. BIOS/UEFIでセキュアブートを無効化
2. PXEブートでイメージ展開
3. Windows起動後、セキュアブートを再度有効化

自動化スクリプトで設定を切り替えることも可能です。

---

### Q11: 圧縮率は調整できますか？

**A:** はい、以下のオプションがあります：

- **z0**: 無圧縮（最速）
- **z1p**: 並列gzip圧縮（推奨、高速）
- **z9p**: 並列gzip最高圧縮（低速、小容量）

推奨は `z1p` です。展開速度と圧縮率のバランスが良好です。

スクリプト実行時に指定可能：
```bash
sudo ./scripts/02-create-image.sh win11-base z1p
```

---

### Q12: ネットワーク速度の最適化方法は？

**A:** 以下の方法で最適化できます：

1. **Jumbo Frame有効化**（スイッチ対応の場合）
   ```bash
   sudo ip link set enp0s3 mtu 9000
   ```

2. **マルチキャストパラメータ調整**
   - 帯域制限の調整
   - クライアント数の最適化

3. **SSDの使用**
   - ディスクI/Oがボトルネックになるのを防ぐ

4. **Gigabit Ethernet必須**
   - 100Mbpsでは展開に時間がかかりすぎます

---

## 運用に関する質問

### Q13: マスターイメージはどのくらいの頻度で更新すべきですか？

**A:** 推奨頻度：

- **通常**: 四半期ごと（3ヶ月）
- **セキュリティパッチ適用後**: 即座に
- **大型Windowsアップデート後**: 1週間以内
- **新しいアプリケーション追加時**: 必要に応じて

旧イメージは最低2世代保持することを推奨します。

---

### Q14: 展開後の個別設定（PC名、ドメイン参加）はどうしますか？

**A:** 2つの方法があります：

**方法1: ポストデプロイスクリプト**
- イメージに自動実行スクリプトを含める
- MACアドレスベースでPC名を自動設定
- ドメイン参加も自動化可能

例: [post-deploy-rename.bat](../examples/post-deploy-rename.bat)

**方法2: 手動設定**
- 展開後、各PCで手動設定
- 小規模環境に適している

---

### Q15: 同時に展開できる台数の上限は？

**A:** 

**理論上**: 100台以上

**実用上の推奨**:
- **マルチキャスト**: 40台まで
- **サーバースペックによる**: 10-40台

40台を超える場合は、複数バッチに分けて展開することを推奨します。

---

### Q16: 展開中にエラーが発生したPCだけ再試行できますか？

**A:** はい、可能です。

**方法1: ユニキャストで個別展開**
```bash
sudo ./scripts/03-deploy-multicast.sh <イメージ名> 1 120
```

**方法2: 失敗したPCのみ再PXEブート**
- マルチキャストセッションが終了していない場合、再起動すれば自動的に再参加

---

### Q17: 部署別に異なるイメージを管理できますか？

**A:** はい、推奨の運用方法です。

**イメージ命名例:**
```
/home/partimag/
├── win11-sales-2025/         # 営業部
├── win11-accounting-2025/    # 経理部
├── win11-engineering-2025/   # 開発部
└── win11-general-2025/       # 一般
```

展開時にイメージ名を指定するだけで切り替え可能です。

詳細は [WORKFLOWS.md](./WORKFLOWS.md) を参照。

---

## トラブルシューティング

### Q18: PXEブートが始まらない場合は？

**A:** 以下を順番にチェック：

1. **BIOS設定**
   - PXE Bootが有効か
   - Network Bootが最優先か

2. **ネットワーク接続**
   - LANケーブルが接続されているか
   - スイッチのリンクLEDが点灯しているか

3. **DHCPサービス**
   ```bash
   sudo systemctl status dnsmasq
   ```

4. **ファイアウォール**
   ```bash
   sudo ufw status | grep "67\|69"
   ```

詳細は [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) を参照。

---

### Q19: 展開速度が遅い（100Mbps未満）場合は？

**A:** 

**原因:**
- ネットワークケーブルの品質
- スイッチがGigabitに対応していない
- サーバーのディスクI/Oが遅い

**対処法:**
```bash
# リンク速度確認
ethtool enp0s3 | grep Speed

# 1000Mb/s でない場合
# - Cat5e以上のケーブルに交換
# - Gigabitスイッチを使用
# - サーバーをSSDにアップグレード
```

---

### Q20: イメージが破損した場合の対処は？

**A:** 

**予防策:**
- 定期的なバックアップ
- チェックサムの保存

**対処法:**
```bash
# イメージの整合性確認
cd /home/partimag/<イメージ名>/
ls -lh

# 必須ファイル（disk, parts, *.gz）が揃っているか確認

# 破損している場合
# 1. バックアップから復元
# 2. マスターPCから再作成
```

バックアップ方法:
```bash
sudo rsync -avz /home/partimag/ /mnt/backup/
```

---

## ライセンスとコスト

### Q21: 商用利用は可能ですか？

**A:** はい、可能です。

- **このプロジェクト**: MIT License（商用利用可）
- **Clonezilla**: GPL v2（商用利用可）
- **DRBL**: GPL v2（商用利用可）
- **Ubuntu**: 無料（商用サポートは有償）

すべてのコンポーネントが商用利用可能です。

---

### Q22: Windowsライセンスはどうなりますか？

**A:** 

イメージ展開とは別に、各PCに対してWindowsライセンスが必要です。

**オプション:**
1. **OEMライセンス**: PC購入時に付属
2. **ボリュームライセンス**: 企業向け一括購入
3. **KMSサーバー**: 大規模環境での自動認証

Sysprepを使用することで、ライセンスの再認証がスムーズになります。

---

### Q23: サポートは提供されていますか？

**A:** 

**コミュニティサポート:**
- GitHub Issues（このプロジェクト）
- Clonezilla Forum
- Ubuntu Community

**商用サポート:**
- Ubuntu Pro（サーバーOS）
- システムインテグレーター

**自社サポート:**
- このドキュメントで基本的な運用は可能
- 社内IT部門で対応可能な設計

---

### Q24: 既存のClonezilla環境から移行できますか？

**A:** はい、可能です。

既存のClonezillaイメージは互換性があります。

**移行手順:**
1. 既存イメージを `/home/partimag/` にコピー
2. パーミッション調整: `sudo chmod -R 755 /home/partimag/`
3. イメージ確認: `./scripts/04-list-images.sh`

---

### Q25: クラウド環境（AWS、Azure）で使用できますか？

**A:** 

物理PCのキッティングを目的としているため、クラウド環境での使用は想定していません。

**代替案:**
- AWS: AMI (Amazon Machine Image)
- Azure: Managed Image
- クラウドネイティブなイメージ管理サービスを使用

ただし、クラウド上にClonezilla Serverを構築し、オンプレミスのPCを展開することは可能です（VPN経由など）。

---

## その他

### Q26: 大学や教育機関での利用は可能ですか？

**A:** はい、最適です。

**利用例:**
- PC教室の一括セットアップ
- 学期ごとのイメージリフレッシュ
- 卒業生PCのクリーニング

すべて無償で利用可能です。

---

### Q27: 他の類似システムとの違いは？

**A:** 

| 機能 | Clonezilla SE | FOG Project | Microsoft WDS |
|-----|---------------|-------------|---------------|
| コスト | 無料 | 無料 | Windowsライセンス必要 |
| OS対応 | 全OS | 全OS | Windows中心 |
| マルチキャスト | ◯ | ◯ | ◯ |
| 学習曲線 | 中 | 中 | やや複雑 |
| 日本語対応 | ◯ | △ | ◯ |

Clonezilla SEは、バランスの取れた選択肢です。

---

### Q28: このシステムの将来性は？

**A:** 

**メリット:**
- オープンソースで継続的に開発
- 大規模なコミュニティ
- 商用サポートも利用可能

**リスク:**
- 技術の進化（クラウドシフト）
- メンテナンス体制の確保

中期的（5年程度）は安心して利用できます。

---

### Q29: もっと詳しく知りたい場合は？

**A:** 

以下のドキュメントを参照してください：

- [README.md](../README.md) - システム全体の説明
- [QUICK_START.md](./QUICK_START.md) - 30分で始める
- [WORKFLOWS.md](./WORKFLOWS.md) - 運用ワークフロー
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - トラブル対応
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 技術詳細

**外部リンク:**
- [Clonezilla公式](https://clonezilla.org/)
- [DRBL Project](https://drbl.org/)
- [Ubuntu Server](https://ubuntu.com/server)

---

### Q30: 質問や問題の報告はどこにすればよいですか？

**A:** 

GitHubのIssuesで報告してください：
https://github.com/Kensan196948G/PCSetUpAutomation-CloneZillaServer-System/issues

以下の情報を含めると対応がスムーズです：
- システム環境（OS、ハードウェア）
- 発生した問題の詳細
- エラーメッセージ
- 実行したコマンドと結果

---

## さらなる質問

上記に記載されていない質問がある場合は、GitHubでIssueを作成してください。コミュニティが回答をサポートします。
